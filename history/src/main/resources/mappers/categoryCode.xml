<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hifive.history.repository.mappers.categoryCode">
	<sql id="BaseCondition">
      <where>
         <choose>
            <when test="isAll == 'true' ">
               ID = #{id} 
            </when>
            <when test="isAll == 'false' ">
               ID = #{id}  AND STATE = '0'
            </when>
            <otherwise></otherwise>
         </choose>
      </where>
   </sql>

	<select id="hi_selectCategory" parameterType="map" resultType="com.hifive.history.model.CategoryDto">
		SELECT SEQ, ID, NAME, STATE 
		FROM CATEGORY_H 
		<include refid="BaseCondition"/>
		ORDER BY SEQ
	</select>
	
	<insert id="hi_insert" parameterType="com.hifive.history.model.iDto">
		INSERT 
		INTO CATEGORY_H(SEQ, ID, NAME, STATE)
		VALUES(SEQ_CATEGORY.NEXTVAL, #{id}, #{name}, #{state})
	</insert>
	
	<update id="updateCategory" parameterType="map">
		UPDATE CATEGORY_H
		SET NAME  = #{catename},
			STATE = #{catestate}
		WHERE SEQ = #{cateseq}
	</update>
	<delete id="hi_delete" parameterType="int">
		DELETE FROM CATEGORY_H
		WHERE SEQ = #{cnt}
	</delete>
</mapper>